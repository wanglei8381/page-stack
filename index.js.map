{"version":3,"file":"index.js","sources":["src/base-page.js","src/decode.js","src/utils.js","src/route.js","src/page-stack.js","src/index.js"],"sourcesContent":["export default function createBasePageOptions (pageStack, model) {\n  return {\n    created () {\n      model.onLoad(pageStack.router.params)\n    },\n    beforeMount () {\n      model.onShow()\n    },\n    mounted () {\n      model.onReady()\n    },\n    destroyed () {\n      model.onUnload()\n    }\n  }\n}\n","/* eslint-disable */\nfunction hasOwnProperty (obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function decode (qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n      idx = x.indexOf(eq),\n      kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","export const noop = () => {}\n\nexport const inBrowser = typeof window !== 'undefined'\n\nexport const remove = (arr, key) => {\n  if (arr == null || arr.length === 0) return\n  const index = arr.indexOf(key)\n  if (index > -1) {\n    arr.splice(index, 1)\n  }\n}\n","/* global wx */\n/**\n * wx.navigateTo 和 wx.redirectTo 不允许跳转到 tabbar 页面，只能用 wx.switchTab 跳转到 tabbar 页面,\n * 因为小程序自身的约束，这个在page-stack中并没用限制\n */\nimport { decode } from './decode'\nimport {\n  inBrowser,\n  noop\n} from './utils'\n\nexport function initRoute (pageStack, pathMap) {\n  // 保留当前页面，跳转到应用内的某个页面\n  const navigateTo = options => {\n    routeHandler(options, 'navigateTo')\n  }\n\n  // 关闭当前页面，跳转到应用内的某个页面\n  const redirectTo = options => {\n    routeHandler(options, 'redirectTo')\n  }\n\n  // 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面\n  const switchTab = options => {\n    routeHandler(options, 'switchTab')\n  }\n\n  // 关闭当前页面，返回上一页面或多级页面\n  const navigateBack = options => {\n    pageStack.navigateBack(options || {})\n  }\n\n  // 关闭当前页面，返回上一页面或多级页面\n  const reLaunch = options => {\n    routeHandler(options, 'reLaunch')\n  }\n\n  function routeHandler (options, method) {\n    const { url, success = noop, fail = noop, complete = noop } = options\n    if (url == null) {\n      console.error('url字段为空')\n      return\n    }\n    const urls = url.split('?')\n    const path = urls[0]\n    const page = pathMap[path]\n    if (!page) {\n      console.error('页面切换失败，' + path + '路径不存在')\n      return\n    }\n    const name = page.name\n    if (name === pageStack.router.name) {\n      console.log('同一个页面不需要切换')\n      return\n    }\n    const params = decode(urls[1])\n    pageStack[method]({\n      path,\n      name,\n      params,\n      success,\n      fail,\n      complete\n    })\n  }\n\n  // 挂载到window.wx上\n  if (inBrowser && window.wx) {\n    wx.navigateTo = navigateTo\n    wx.redirectTo = redirectTo\n    wx.switchTab = switchTab\n    wx.navigateBack = navigateBack\n    wx.reLaunch = reLaunch\n  }\n}\n","import basePage from './base-page'\nimport { initRoute } from './route'\nimport { remove } from './utils'\n\nexport const pageStack = (Vue, pages, models) => {\n  // 当前组件的实例\n  let pageStack\n\n  const transitionData = {\n    name: 'wx-page-open',\n    type: 'transition'\n  }\n  const pathMap = Object.create(null)\n  const nameMap = Object.create(null)\n  pages.forEach((page) => {\n    pathMap[page.path] = page\n    nameMap[page.name] = page\n  })\n\n  // 对已经定义的页面组件进行扩展，添加生命周期钩子函数\n  const expandPageComponent = (vm) => {\n    pages.forEach(({ name, path }) => {\n      const PageComponent = Vue.component(name)\n      const PageExtendComponent = PageComponent.extend(basePage(vm, models[path]))\n      Vue.component(name, PageExtendComponent)\n    })\n  }\n\n  function destroyPageComponent (cache, stack, name) {\n    const vnode = cache[name]\n    if (vnode) {\n      vnode.componentInstance.$destroy()\n    }\n    cache[name] = null\n    remove(stack, name)\n  }\n\n  return {\n    name: 'page-stack',\n\n    abstract: true,\n\n    beforeCreate () {\n      if (pageStack) {\n        console.error('page-stack组件只能使用一次，多个挂载点将导致路由混乱')\n      }\n      pageStack = this\n      initRoute(this, pathMap)\n      expandPageComponent(this)\n    },\n\n    created () {\n      this.cache = Object.create(null)\n      const page = pages[0]\n      this.router = {\n        path: page.path,\n        params: {},\n        name: page.name,\n        tabBar: true\n      }\n      this.stack = []\n      // 当前的操作wx.路由是关闭当前页面\n      this.close = false\n    },\n\n    destroyed () {\n      this.batchDestroyed(this.stack)\n    },\n\n    methods: {\n      update () {\n        this.$forceUpdate()\n        if (this.cache[this.router.name]) {\n          this.$nextTick(() => {\n            models[this.router.path].onShow()\n          })\n        }\n      },\n\n      batchDestroyed (stack) {\n        for (let i = stack.length - 1; i >= 0; i--) {\n          const name = stack[i]\n          destroyPageComponent(this.cache, this.stack, name)\n        }\n      },\n\n      navigateTo (options) {\n        models[this.router.path].onHide()\n        this.router = options\n        this.close = false\n        this.update()\n      },\n\n      redirectTo (options) {\n        destroyPageComponent(this.cache, this.stack, this.router.name)\n        this.router = options\n        this.close = false\n        this.update()\n      },\n\n      switchTab (options) {\n        const stack = this.stack.slice()\n        const tabBars = []\n        const pageNames = []\n        this.stack = []\n        for (let i = 0; i < stack.length; i++) {\n          let name = stack[i]\n          let page = nameMap[name]\n          if (page.tabBar) {\n            tabBars.push(name)\n          } else {\n            pageNames.push(name)\n          }\n        }\n\n        this.batchDestroyed(pageNames)\n        this.stack = tabBars\n        if (this.router.tabBar) {\n          models[this.router.path].onHide()\n        }\n        this.router = options\n        this.update()\n      },\n\n      navigateBack (options) {\n        const delta = options.delta || 1\n        const stack = this.stack\n        if (delta >= this.stack.length) {\n          destroyPageComponent(this.cache, this.stack, this.router.name)\n          const page = pages[0]\n          this.router = {\n            path: page.path,\n            params: {},\n            name: page.name,\n            tabBar: true\n          }\n        } else {\n          const length = stack.length - 1\n          const min = length - delta\n          const page = nameMap[stack[min]]\n          for (let i = length; i > min; i--) {\n            const name = stack[i]\n            destroyPageComponent(this.cache, this.stack, name)\n          }\n          this.router = {\n            path: page.path,\n            params: {},\n            name: page.name,\n            tabBar: page.tabBar\n          }\n        }\n\n        this.close = true\n        this.update()\n      },\n\n      reLaunch (options) {\n        const stack = this.stack.slice()\n        this.stack = []\n        this.batchDestroyed(stack)\n        this.router = options\n        this.close = false\n        this.update()\n      }\n    },\n\n    render (h) {\n      const cache = this.cache\n      const stack = this.stack\n      const name = this.router.name\n      let vnode = cache[name]\n      if (!vnode) {\n        vnode = cache[name] = h(name)\n        vnode.key = `__transition-${this._uid}-` + name\n        vnode.data.transition = transitionData\n      } else {\n        remove(stack, name)\n      }\n      vnode.data.transition.name = this.close ? 'wx-page-close' : 'wx-page-open'\n      stack.push(name)\n      vnode.data.keepAlive = true\n      return vnode\n    }\n  }\n}\n","import { pageStack } from './page-stack'\n\nconst wxAppLifecycleHooks = [\n  'onInit',\n  'onLoad',\n  'onReady',\n  'onShow',\n  'onHide',\n  'onUnload',\n  'onPullDownRefresh',\n  'onReachBottom'\n]\n\nconst noop = () => {}\n\n/*\n pages和option的格式\n\n name是页面组件的名字，path是对应的小程序页面地址，tabBar是在小程序tabBar列表中的页面\n pages: [\n  {name: 'PagesIndexIndex', path: 'pages/index/index', tabBar: true},\n  {name: 'PagesLogsLogs', path: 'pages/logs/logs'}\n ],\n\n key是对应的小程序页面地址，value是小程序Page的options\n models: {\n  'pages/index/index': indexOptions,\n  'pages/logs/logs': logsOptions\n }\n */\nexport default function (Vue, options) {\n  const pages = options.pages\n  const models = options.models\n  for (let key in models) {\n    const model = models[key]\n    wxAppLifecycleHooks.forEach(hook => {\n      if (!model[hook]) {\n        model[hook] = noop\n      }\n    })\n  }\n  Vue.component('page-stack', pageStack(Vue, pages, models))\n}\n"],"names":["const","noop","let","basePage","this","page"],"mappings":"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"}